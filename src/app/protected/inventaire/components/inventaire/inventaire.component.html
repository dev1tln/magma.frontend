<mat-toolbar color="warn" id="toolbar-inventaire">Inventaire en cours</mat-toolbar>
<mat-accordion [multi]="true">
  <mat-expansion-panel *ngFor="let nno of affichageData | keyvalue">
    <mat-expansion-panel-header [ngClass]="{
      'inventaire-item' : compteManquant(nno.value)!==0 && compteNouveau(nno.value)===0,
      'inventaire-item-valide' : compteManquant(nno.value)===0 && compteNouveau(nno.value)===0,
      'inventaire-item-nouveau' : compteNouveau(nno.value)>0
    }">
      <mat-panel-title>
        <span matBadge="{{compteNouveau(nno.value)}}" matBadgeColor="warn"
          [matBadgeHidden]="compteNouveau(nno.value)===0" matBadgeOverlap="false">{{nno.value[0].lib}}</span>
      </mat-panel-title>
      <mat-panel-description id="nno-info">
        {{nno.key}}
      </mat-panel-description>
      <mat-icon *ngIf="compteManquant(nno.value)==0; else missBlock">check_circle_outline</mat-icon>
      <ng-template #missBlock>
        <div id="nombre-manquant">{{compteManquant(nno.value)}}</div>
      </ng-template>
    </mat-expansion-panel-header>
    <mat-list>
      <mat-list-item [routerLink]="['/inventaire/article']" *ngFor="let article of nno.value"
        (click)="onSubmit(article)" [ngClass]="{
      'valide' : scanne(article),
      'nouveau' : nouveau(article)
    }">
        <span>{{article.numref}}</span>
        <span id="numserie" *ngIf="article.numser !== null">{{article.numser}}</span>
      </mat-list-item>
    </mat-list>
  </mat-expansion-panel>
</mat-accordion>
